<html>
    <head>
        <meta charset="utf-8">
        <meta name="keywords" content="箩筐地图,DIY地图,箩筐地图生成器">
        <meta name="description" content="箩筐地图，DIY地图，自己制作地图，生成自己的箩筐地图">
        <title>北方购物 - 箩筐地图</title>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
        <meta charset="utf-8" />
        <script src="https://webapi.luokuang.com/maps?ak=DB1589338764061116C2A51A2CF1B144F2BFA1D29334859EE996VY8OQZR7MGD8"></script>
        <style>
            body { margin: 0; font: 13px/1.5 "Microsoft YaHei", "Helvetica Neue", "Sans-Serif"; }
            #map { margin: 0 auto; width: 100%; height: 100%; }
            #map .lkmap-ctrl-toolBar-lite {margin: 0 34px 10px 0;}
            #map .lkmap-ctrl-compass-lite {margin-right: 24px;}
        </style>
    </head>
    <body>
        <div id="map"></div>
        
        <script>
            var map, mapCenter, layerData, layer, inforWindow;
            mapCenter = new LKMap.LngLat(118.158,39.828);
            map = new LKMap.Map("map",{
                center: mapCenter,
                zoom: 14,
            });
            false
        
            function mapLoadFunction(){
            addOverLayer();
            }
        
            function addOverLayer() {
                for (var i in layerData) {
                    var itemData = layerData[i];
                    switch(itemData.type) {
                        case 'marker':
                            layer = new LKMap.Marker({
                                map: map,
                                position: new LKMap.LngLat(itemData.lnglat.lng, itemData.lnglat.lat),
                                anchor: 'bottom',
                                extData: itemData,
                                cursor: 'pointer',
                            });
                            break;
                        case 'polyline':
                            layer = new LKMap.Polyline({
                                map: map,
                                path: itemData.path,
                                strokeWeight: itemData.strokeWeight,
                                strokeColor: itemData.strokeColor,
                                strokeOpacity: itemData.strokeOpacity,
                                extData: itemData,
                                cursor: 'pointer',
                            });
                            break;
                        case 'polygon':
                            layer = new LKMap.Polygon({
                                map: map,
                                path: itemData.path,
                                fillColor: itemData.fillColor,
                                fillOpacity: itemData.fillOpacity,
                                strokeWeight: itemData.strokeWeight,
                                strokeColor: itemData.strokeColor,
                                strokeOpacity: itemData.strokeOpacity,
                                extData: itemData,
                                cursor: 'pointer',
                            });
                            break;
                    }
                    if (layer) layer.on('click', clickLayerCallback)
                }
            }
            function clickLayerCallback (e) {
                var extData = e.layer.getExtData()
                if (!inforWindow) createInforWindow();
                if (e.layer.type == 'marker') {
                    inforWindow.options['offset'] = [0, -33];
                    inforWindow.setHTML('<h3>'+extData.name+'</h3><p>'+extData.intro+'</p>');
                    inforWindow.open(map, e.layer.getPosition());
                } else {
                    inforWindow.options['offset'] = [0, 0];
                    inforWindow.setHTML('<h3>'+extData.name+'</h3><p>'+extData.intro+'</p>');
                    inforWindow.open(map, e.lngLat);
                }
            }
            function createInforWindow() {
                inforWindow && inforWindow.close();
                inforWindow = new LKMap.InforWindow({
                    anchor: 'bottom',
                    closeOnClick: true,
                    autoMove: true,
                    content: ''
                });

            }
        
            map.on('load', mapLoadFunction);
        </script>
        
    </body>
</html>
        